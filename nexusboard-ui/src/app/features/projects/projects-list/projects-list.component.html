<div class="projects-container">
  <div class="header">
    <h1>My Projects</h1>
    <button mat-raised-button color="primary" (click)="openCreateDialog()">
      <mat-icon>add</mat-icon>
      Create Project
    </button>
  </div>

  <div class="projects-grid" *ngIf="projects.length > 0; else noProjects">
    <mat-card *ngFor="let project of projects" class="project-card">
      <mat-card-header>
        <div mat-card-avatar class="status-avatar" [style.background-color]="getStatusColor(project.status)">
          <mat-icon>work</mat-icon>
        </div>
        <mat-card-title>{{ project.name }}</mat-card-title>
        <mat-card-subtitle>{{ project.team.name }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <p class="description">{{ project.description }}</p>
        
        <div class="project-meta">
          <mat-chip-set>
            <mat-chip [style.color]="getStatusColor(project.status)">
              {{ getStatusName(project.status) }}
            </mat-chip>
            <mat-chip [style.color]="getPriorityColor(project.priority)">
              {{ getPriorityName(project.priority) }} Priority
            </mat-chip>
          </mat-chip-set>
        </div>

        <div class="progress-section" *ngIf="project.taskCounts.total > 0">
          <div class="progress-header">
            <span>Progress</span>
            <span>{{ project.taskCounts.done }}/{{ project.taskCounts.total }} tasks</span>
          </div>
          <mat-progress-bar 
            mode="determinate" 
            [value]="getProgressPercentage(project)"
            color="primary">
          </mat-progress-bar>
          <div class="task-breakdown">
            <span class="task-stat todo">{{ project.taskCounts.todo }} Todo</span>
            <span class="task-stat progress">{{ project.taskCounts.inProgress }} In Progress</span>
            <span class="task-stat review">{{ project.taskCounts.review }} Review</span>
            <span class="task-stat done">{{ project.taskCounts.done }} Done</span>
          </div>
        </div>

        <div class="no-tasks" *ngIf="project.taskCounts.total === 0">
          <mat-icon>assignment</mat-icon>
          <span>No tasks yet</span>
        </div>

        <div class="project-dates" *ngIf="project.startDate || project.endDate">
          <div class="date-info" *ngIf="project.startDate">
            <mat-icon>event</mat-icon>
            <span>Started: {{ formatDate(project.startDate) }}</span>
          </div>
          <div class="date-info" *ngIf="project.endDate">
            <mat-icon>event_available</mat-icon>
            <span>Due: {{ formatDate(project.endDate) }}</span>
          </div>
        </div>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-button (click)="viewProject(project.id)">
          <mat-icon>visibility</mat-icon>
          View Details
        </button>
        <button mat-button (click)="manageTasks(project.id)" color="primary">
          <mat-icon>assignment</mat-icon>
          Manage Tasks
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <ng-template #noProjects>
    <div class="no-projects">
      <mat-icon class="large-icon">work_outline</mat-icon>
      <h2>No projects yet</h2>
      <p>Create your first project to start organizing your team's work.</p>
      <button mat-raised-button color="primary" (click)="openCreateDialog()">
        Create Your First Project
      </button>
    </div>
  </ng-template>
</div>